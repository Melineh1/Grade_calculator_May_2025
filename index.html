<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Grade Calculator</title>
  <style>
    body { font-family: sans-serif; padding: 1em; max-width: 500px; margin: auto; }
    input { width: 100%; margin: 0.5em 0; padding: 0.5em; font-size: 1em; }
    .result { margin-top: 1em; white-space: pre-line; }
  </style>
</head>
<body>
  <h2>Final Exam Grade Needed</h2>
  <label>9 Weeks 3 Grade:</label>
  <input class="grade-input" type="number" id="nw3" placeholder="e.g. 75" />

  <label>9 Weeks 4 Grade:</label>
  <input class="grade-input" type="number" id="nw4" placeholder="e.g. 80" />

  <label>Semester 1 Grade:</label>
  <input class="grade-input" type="number" id="sem1" placeholder="e.g. 68" />

  <div class="result" id="finalNeeded"></div>
  <div class="result" id="yearResult"></div>

  <script>
    const nw3Input = document.getElementById("nw3");
    const nw4Input = document.getElementById("nw4");
    const sem1Input = document.getElementById("sem1");
    const finalNeededDiv = document.getElementById("finalNeeded");
    const yearResultDiv = document.getElementById("yearResult");

    function calculate() {
      const nw3 = parseFloat(nw3Input.value);
      const nw4 = parseFloat(nw4Input.value);
      const sem1 = parseFloat(sem1Input.value);

      if (isNaN(nw3) || isNaN(nw4)) {
        finalNeededDiv.textContent = "Enter both Nine Weeks grades.";
        yearResultDiv.textContent = "";
        return;
      }

      const needed = (target) => Math.max(0, ((target - (nw3 * 0.45 + nw4 * 0.45)) / 0.1).toFixed(2));

      finalNeededDiv.textContent =
        `To get a 70 average: Final Exam = ${needed(70)}\n` +
        `To get an 80 average: Final Exam = ${needed(80)}\n` +
        `To get a 90 average: Final Exam = ${needed(90)}`;

      if (!isNaN(sem1)) {
        const sem2 = ((nw3 * 0.45) + (nw4 * 0.45) + (70 * 0.1)); // assuming 70 on final
        const yearAvg = ((sem1 + sem2) / 2).toFixed(2);
        if (yearAvg >= 70 && sem1 >= 60) {
          yearResultDiv.textContent = `Estimated Year Average: ${yearAvg}\n✅ You passed for the year (verify with counselor).`;
        } else {
          yearResultDiv.textContent = `Estimated Year Average: ${yearAvg}\n❌ You may not pass. See counselor.`;
        }
      } else {
        yearResultDiv.textContent = "";
      }
    }

    document.querySelectorAll('.grade-input').forEach((
