<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Grade Calculator</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1em;
      max-width: 500px;
      margin: auto;
    }
    input {
      width: 100%;
      padding: 0.5em;
      margin: 0.5em 0;
      font-size: 1em;
    }
    p {
      margin: 0.5em 0;
    }
  </style>
</head>
<body>
  <h2>Semester 2 Grade Calculator</h2>
  <label>Nine Weeks 3 Grade</label>
  <input type="number" id="nw3" placeholder="e.g., 85" />

  <label>Nine Weeks 4 Grade</label>
  <input type="number" id="nw4" placeholder="e.g., 78" />

  <label>Final Exam Grade (if known)</label>
  <input type="number" id="finalExam" placeholder="e.g., 90" />

  <p id="semesterGrade"></p>
  <p id="neededFinal"></p>

  <h2>Yearly Average Calculator</h2>
  <label>Semester 1 Grade</label>
  <input type="number" id="semester1" placeholder="e.g., 72" />

  <p id="yearResult"></p>

  <script>
    const inputs = ['nw3', 'nw4', 'finalExam', 'semester1'];
    inputs.forEach(id => {
      document.getElementById(id).addEventListener('input', update);
    });

    function update() {
      const nw3 = parseFloat(document.getElementById('nw3').value);
      const nw4 = parseFloat(document.getElementById('nw4').value);
      const finalExam = parseFloat(document.getElementById('finalExam').value);
      const semester1 = parseFloat(document.getElementById('semester1').value);

      const sGradeText = document.getElementById('semesterGrade');
      const neededFinalText = document.getElementById('neededFinal');
      const yearResult = document.getElementById('yearResult');

      if (!isNaN(nw3) && !isNaN(nw4)) {
        const base = (nw3 * 0.45 + nw4 * 0.45);
        let semester2 = NaN;

        if (!isNaN(finalExam)) {
          semester2 = base + finalExam * 0.1;
          sGradeText.textContent = `Semester 2 Grade: ${semester2.toFixed(2)}%`;
          neededFinalText.textContent = '';
        } else {
          const targets = [70, 80, 90];
          let output = '';
          targets.forEach(target => {
            const needed = (target - base) / 0.1;
            output += `To get a ${target} average: Final exam needed = ${needed.toFixed(2)}\n`;
          });
          neededFinalText.textContent = output.trim();
          sGradeText.textContent = '';
        }

        if (!isNaN(semester1) && !isNaN(semester2)) {
          const yearly = (semester1 + semester2) / 2;
          if (yearly >= 70 && semester1 >= 60) {
            yearResult.textContent = "You passed for the year! Verify with your counselor.";
          } else {
            yearResult.textContent = "You did not pass for the year. Please see your counselor.";
          }
        } else {
          yearResult.textContent = '';
        }
      } else {
        sGradeText.textContent = '';
        neededFinalText.textContent = '';
        yearResult.textContent = '';
      }
    }
  </script>
</body>
</html>
